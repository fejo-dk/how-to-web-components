<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Test Case</title>
	<style>
.color-box {
	margin: 1em 0;
	background-color: #EEE;
}

.color-box.is-selected {
	background-color: #0F0;
}
	</style>
</head>

<body>
	<div class="color-box">lorem ipsum</div>
	<hr>
	<div class="color-box">dolor sit amet</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
	<script>
(function($) { // Immediately Invoked Function Expression (IIFE)

	// `application.js`
	// depends on `color_box/index.js`

	function main() {
		initColorBoxes();
	}


	// `color_box/index.js`
	// depends on `color_box/index.js`

	function initColorBoxes() {
		$(ColorBox.selector).each(function(i, node) {
			var $el = $(node);
			new ColorBox($el);
		});
	}


	// `color_box/component.js`

	class ColorBox {
		static get selector() {
			return ".color-box";
		}

		constructor($el) {
			console.log($el);

			this.$el = $el;
			this.count = 0;

			$el.click(this.onClick.bind(this));
		}

		onClick(ev) {
			this.count++;
			console.log("[CLICK]", $(this).text(), this.count);

			this.$el.toggleClass("is-selected");
		}
	}


	// required due to lack of class hoisting
	main();

}(jQuery));
	</script>
</body>

</html>
